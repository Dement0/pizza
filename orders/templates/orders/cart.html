{% extends 'orders/base.html' %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'orders:index' %}">Menu</a></li>
<li class="breadcrumb-item active" aria-current="page">Cart</li>
{% endblock %}

{% block content %}
<div class="">
  <div class="">
    <h1>Cart</h1>
  </div>
  <div id="cart" class="">
    {% if cart %}
    <ol>
    {% for item_in_cart in cart %}
      {% if item_in_cart.pizza != none %}
        <li>{{ item_in_cart.pizza }}, quantity: {{ item_in_cart.quantity }}</li>
      {% else %}
        <li>{{ item_in_cart.topping }}, quantity: {{ item_in_cart.quantity }}</li>
      {% endif %}
    {% endfor %}
    </ol>
    {% else %}
      <p>No item in cart.</p>
    {% endif %}
  </div>

  <div class="form-row">
    <div class="form-group col text-center">
      <form class="" action="{% url 'orders:checkout' %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="stripe_public_key" value="{{ stripe_public_key }}">
        <button class="btn btn-success" type="submit">Checkout</button>
      </form>
    </div>
    <div class="form-group col text-center">
      <form class="" action="{% url 'orders:clear_cart' %}" method="post">
        {% csrf_token %}
        <button class="btn btn-danger" type="submit">Clear Cart</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
